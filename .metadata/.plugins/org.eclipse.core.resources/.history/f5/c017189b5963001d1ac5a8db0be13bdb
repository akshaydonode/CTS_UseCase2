package com.cts.dataloader.controllers;

import javax.validation.Valid;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestPart;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;

import com.cts.dataloader.dtos.ResponseDTO;
import com.cts.dataloader.services.PatientService;



@RestController
@RequestMapping("/patient")
public class PatientController {
	
	@Autowired
	PatientService patientService;
	
	@PostMapping("/load/patientdata")
	public ResponseDTO patientData(@Valid @RequestPart MultipartFile excelFile) {
		ResponseDTO responseDto = new ResponseDTO();

		//try {
			String message = patientService.patientData(excelFile);
			responseDto.setResult(message);
			responseDto.setMessage("Data Uploaded Successfully.");
//		} catch (DataLoaderException e) {
//			responseDto.setException(e.getMessage());
//		}

		return responseDto;

	}

}
